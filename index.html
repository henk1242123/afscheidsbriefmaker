<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Grow a Garden Hub - 21 juli 2025</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #daf5c8;
    color: #26582b;
    margin: 0; padding: 0;
  }
  header {
    background-color: #63a34a;
    padding: 1rem 2rem;
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  header img#game-logo {
    height: 50px;
    user-select: none;
  }
  nav {
    background: #4f8b34;
    display: flex;
    justify-content: center;
    gap: 2rem;
    padding: 1rem 0;
  }
  nav a {
    color: white;
    font-weight: 700;
    font-size: 1.1rem;
    cursor: pointer;
    text-decoration: none;
    user-select: none;
    transition: opacity 0.2s;
  }
  nav a:hover, nav a.active {
    text-decoration: underline;
    opacity: 0.9;
  }
  main {
    max-width: 1100px;
    margin: auto;
    padding: 2rem;
  }
  .hidden {
    display: none;
  }

  h1, h2, h3 {
    font-weight: 700;
    margin-bottom: 0.6rem;
  }

  /* Stock Table */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
    background: white;
    box-shadow: 0 0 8px rgba(0,0,0,0.07);
    border-radius: 6px;
    overflow: hidden;
  }
  table th, table td {
    border-bottom: 1px solid #c0d7a8;
    padding: 0.7rem 1rem;
    text-align: center;
    vertical-align: middle;
  }
  table th {
    background-color: #7cc044;
    color: white;
    font-weight: 700;
  }
  table tr:last-child td {
    border-bottom: none;
  }
  .timer {
    font-size: 1.1rem;
    font-weight: 700;
    margin: 0.8rem 0 1rem;
    color: #416421;
  }

  /* Calculator styles */
  form {
    max-width: 450px;
    background: white;
    padding: 1.5rem;
    border-radius: 8px;
    box-shadow: 0 0 10px #a5d06c;
  }
  label {
    display: block;
    margin: 0.8rem 0 0.3rem;
    font-weight: 600;
  }
  input[type="text"], input[type="number"] {
    width: 100%;
    padding: 0.4rem 0.6rem;
    border: 2px solid #a1ce71;
    border-radius: 4px;
    font-size: 1rem;
  }
  button {
    margin-top: 1rem;
    padding: 0.6rem 1rem;
    background: #63a34a;
    border: none;
    border-radius: 6px;
    color: white;
    font-weight: 700;
    font-size: 1.1rem;
    cursor: pointer;
    transition: background 0.3s;
  }
  button:hover {
    background: #52853a;
  }

  #calcResult {
    margin-top: 1.5rem;
    font-size: 1.3rem;
    font-weight: 700;
    color: #3b6b1f;
  }

  /* Fruit images in stock */
  .stock-img {
    height: 48px;
    width: 48px;
    object-fit: contain;
    border-radius: 6px;
    margin-right: 10px;
  }
  .stock-item {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Info lists */
  ul {
    list-style-type: disc;
    margin-left: 1.5rem;
  }
</style>
</head>
<body>
<header>
  <img id="game-logo" src="game_logo.png" alt="Grow a Garden Logo" />
  <h1>Grow a Garden Hub - 21 Juli 2025</h1>
</header>
<nav>
  <a class="active" href="#" onclick="showPage('calculator')">Calculator</a>
  <a href="#" onclick="showPage('stock')">Shop Stock</a>
  <a href="#" onclick="showPage('info')">Info</a>
</nav>
<main>
  <!-- Calculator page -->
  <section id="calculator">
    <h2>Fruit Waarde Calculator</h2>
    <form id="calcForm">
      <label for="fruitInput">Voer je fruit in (komma-gescheiden):</label>
      <input type="text" id="fruitInput" placeholder="Apple, Dragon Fruit, Banana" required />

      <label for="mutationInput">Mutaties (komma-gescheiden):</label>
      <input type="text" id="mutationInput" placeholder="Rainbow, Shocked, Glowing" />

      <label for="friendBoostInput">Friend Boost (%)</label>
      <input type="number" id="friendBoostInput" min="0" max="100" value="0" />

      <button type="submit">Bereken waarde</button>
    </form>
    <div id="calcResult"></div>
  </section>

  <!-- Stock page -->
  <section id="stock" class="hidden">
    <h2>Shop Stock & Restock Timer</h2>
    <div class="timer" id="restockTimer">Volgende restock over: --:--</div>
    <table>
      <thead>
        <tr>
          <th>Item</th>
          <th>Type</th>
          <th>Aantal</th>
          <th>Prijs (ðŸŒ¸)</th>
        </tr>
      </thead>
      <tbody id="stockBody">
        <tr><td colspan="4">Ladenâ€¦</td></tr>
      </tbody>
    </table>
  </section>

  <!-- Info page -->
  <section id="info" class="hidden">
    <h2>Fruitsoorten</h2>
    <ul id="fruitList"></ul>

    <h2>Mutaties</h2>
    <table>
      <thead><tr><th>Mutatie</th><th>Kans / Effect</th></tr></thead>
      <tbody id="mutationList"></tbody>
    </table>
  </section>
</main>

<script>
  // Navigatie tussen pagina's
  function showPage(id) {
    document.querySelectorAll('main section').forEach(s => s.classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');
    document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
    event.target.classList.add('active');
  }

  // ALLE fruitsoorten van Grow a Garden per 21 juli 2025
  const allFruits = [
    { name: "Apple", basePrice: 266 },
    { name: "Banana", basePrice: 1579 },
    { name: "Blackberry", basePrice: 3540 },
    { name: "Blueberry", basePrice: 4730 },
    { name: "Coconut", basePrice: 1605 },
    { name: "Dragon Fruit", basePrice: 4566 },
    { name: "Grapes", basePrice: 2445 },
    { name: "Kiwi", basePrice: 1800 },
    { name: "Lemon", basePrice: 1985 },
    { name: "Mango", basePrice: 5050 },
    { name: "Orange", basePrice: 2100 },
    { name: "Papaya", basePrice: 4000 },
    { name: "Peach", basePrice: 4200 },
    { name: "Pear", basePrice: 3200 },
    { name: "Pineapple", basePrice: 5300 },
    { name: "Plum", basePrice: 2800 },
    { name: "Raspberry", basePrice: 4500 },
    { name: "Strawberry", basePrice: 3500 },
    { name: "Watermelon", basePrice: 6000 },
  ];

  // Alle mutaties bekend in de game op 21 juli 2025
  const allMutations = [
    { name: "Rainbow", effect: "Verhoogt prijs met +50 ðŸŒ¸" },
    { name: "Shocked", effect: "Verhoogt prijs met +100 ðŸŒ¸" },
    { name: "Glowing", effect: "Verhoogt prijs met +40 ðŸŒ¸" },
    { name: "Poisoned", effect: "Verhoogt prijs met +30 ðŸŒ¸" },
    { name: "Doomed", effect: "Verhoogt prijs met +60 ðŸŒ¸" },
    { name: "Toxic", effect: "Verhoogt prijs met +25 ðŸŒ¸" },
    { name: "Frosted", effect: "Verhoogt prijs met +20 ðŸŒ¸" },
    { name: "Wild", effect: "Verhoogt prijs met +35 ðŸŒ¸" }
  ];

  // Stock van fruit, seeds en gear (voorbeeldwaarden - pas zelf aan)
  let stockData = [
    // Fruit
    { name: "Apple", type: "Fruit", qty: 15, price: 266 },
    { name: "Banana", type: "Fruit", qty: 8, price: 1579 },
    { name: "Dragon Fruit", type: "Fruit", qty: 5, price: 4566 },
    { name: "Watermelon", type: "Fruit", qty: 2, price: 6000 },

    // Seeds
    { name: "Mythic Seed", type: "Seed", qty: 10, price: 12000 },
    { name: "Legendary Seed", type: "Seed", qty: 7, price: 15000 },

    // Gear
    { name: "Flame Sword", type: "Gear", qty: 3, price: 15500 },
    { name: "Golden Scythe", type: "Gear", qty: 1, price: 25000 },
  ];

  // Restock timer (5 minuten = 300 seconden)
  const RESTOCK_INTERVAL = 300;
  let nextRestockTimestamp;

  function updateRestockTimer() {
    const now = Date.now() / 1000;
    if (!nextRestockTimestamp || now >= nextRestockTimestamp) {
      nextRestockTimestamp = now - (now % RESTOCK_INTERVAL) + RESTOCK_INTERVAL;
      // In echte setup kun je hier stockData opnieuw laden via API of JSON update
      // Voor nu gebruik ik dummy stockData die statisch is
      renderStockTable();
    }
    const timeLeft = Math.max(0, nextRestockTimestamp - now);
    const min = String(Math.floor(timeLeft / 60)).padStart(2, '0');
    const sec = String(Math.floor(timeLeft % 60)).padStart(2, '0');
    document.getElementById('restockTimer').textContent = `Volgende restock over: ${min}:${sec}`;
  }

  // Render stock tabel
  function renderStockTable() {
    const tbody = document.getElementById('stockBody');
    tbody.innerHTML = '';
    stockData.forEach(item => {
      tbody.innerHTML += `
        <tr>
          <td class="stock-item">
            <img class="stock-img" src="images/${item.name.replace(/\s+/g, '')}.png" alt="${item.name}" />
            ${item.name}
          </td>
          <td>${item.type}</td>
          <td>${item.qty}</td>
          <td>${item.price}</td>
        </tr>`;
    });
  }

  // Render fruit en mutaties info
  function renderInfo() {
    const fruitList = document.getElementById('fruitList');
    const mutList = document.getElementById('mutationList');
    fruitList.innerHTML = '';
    mutList.innerHTML = '';

    allFruits.forEach(fruit => {
      const li = document.createElement('li');
      li.textContent = `${fruit.name} (Basis prijs: ${fruit.basePrice} ðŸŒ¸)`;
      fruitList.appendChild(li);
    });

    allMutations.forEach(mut => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${mut.name}</td><td>${mut.effect}</td>`;
      mutList.appendChild(tr);
    });
  }

  // Calculator logica
  document.getElementById('calcForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const fruitInput = document.getElementById('fruitInput').value.trim();
    const mutationInput = document.getElementById('mutationInput').value.trim();
    const friendBoostInput = Number(document.getElementById('friendBoostInput').value) || 0;

    if (!fruitInput) {
      alert("Voer tenminste Ã©Ã©n fruitsoort in.");
      return;
    }

    // Haal fruit en mutaties op
    const fruits = fruitInput.split(',').map(f => f.trim().toLowerCase());
    const mutations = mutationInput ? mutationInput.split(',').map(m => m.trim().toLowerCase()) : [];

    // Vind fruit objecten & basisprijs
    let totalBasePrice = 0;
    let fruitNotFound = [];
    fruits.forEach(fruitName => {
      const fruitObj = allFruits.find(f => f.name.toLowerCase() === fruitName);
      if (fruitObj) totalBasePrice += fruitObj.basePrice;
      else fruitNotFound.push(fruitName);
    });

    if (fruitNotFound.length > 0) {
      alert(`Fruit niet gevonden: ${fruitNotFound.join(', ')}`);
      return;
    }

    // Mutaties toevoegen
    let mutationBonus = 0;
    mutations.forEach(mName => {
      const mutObj = allMutations.find(m => m.name.toLowerCase() === mName);
      if (mutObj) {
        // Bonus aantal bloemen extraheren uit string (e.g. +50 ðŸŒ¸)
        const match = mutObj.effect.match(/\+(\d+)\s*ðŸŒ¸/);
        if (match) mutationBonus += Number(match[1]);
      }
    });

    let basePlusMut = totalBasePrice + mutationBonus;

    // Friend boost toepassen
    const finalPrice = Math.round(basePlusMut * (1 + friendBoostInput / 100));

    document.getElementById('calcResult').textContent =
      `Totale waarde: ${finalPrice.toLocaleString()} ðŸŒ¸`;
  });

  // Initialisatie
  renderInfo();
  renderStockTable();
  updateRestockTimer();
  setInterval(updateRestockTimer, 1000);

</script>
</body>
</html>
